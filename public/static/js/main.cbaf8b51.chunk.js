(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{52:function(e,t,a){e.exports=a.p+"static/media/logo.f6d38a09.png"},5539:function(e,t,a){e.exports=a(5765)},5540:function(e,t,a){},5541:function(e,t,a){},5542:function(e,t,a){},5669:function(e,t,a){},5677:function(e,t,a){},5763:function(e,t,a){},5764:function(e,t,a){},5765:function(e,t,a){"use strict";a.r(t);a(5540),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=a(55),n=a(26),o=a(238),s=a(30),i=a(31),l=a(34),c=a(32),d=a(35),u=(a(5541),a(5542),a(0)),m=a.n(u),h=a(16),p=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.displayText,a=e.buttonLink,n=e.buttonText,o=e.children;return m.a.createElement("div",null,m.a.createElement("span",{className:"loginHeader"},m.a.createElement(r.b,{to:"/",id:"website-name"},"iTracker"),o,m.a.createElement("div",{className:"userContainer"},m.a.createElement("label",{id:"member"},t),m.a.createElement(r.b,{to:a},m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",id:"register-button"},n)))))}}]),t}(u.PureComponent),g=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.register,a=e.children;return m.a.createElement(p,{displayText:t?"Already a member?":"Not a member?",buttonText:t?"Login":"Register",buttonLink:t?"/login":"/register",children:a})}}]),t}(u.PureComponent),b=g,f=a(239),w=(a(5669),a(25)),v=Object(w.createMuiTheme)({palette:{primary:{main:"#DDEFF3",text:{primary:"#DDEFF3"}}},typography:{useNextVariants:!0}}),k=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=Object(f.a)(e,["children"]);return m.a.createElement("div",Object.assign({className:"background"},a),m.a.createElement(w.MuiThemeProvider,{theme:v},t))}}]),t}(u.Component),E=a(52),y=a.n(E),x=a(231),C=window.webgazer,S=40,T=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).browseScroll=function(){var e=a.state,t=e.browsing,r=e.active;if(t){var n="upper"===r?-200:200;x.animateScroll.scrollMore(n)}},a.startTraking=function(){var e=a.state,t=e.q,r=e.height;a.setState({tracking:!0}),C.setRegression("ridge").setTracker("clmtrackr").setGazeListener(function(e,n){if(null!=e){var s=Object(o.a)(t);s.push(e),s.length>S&&s.slice(0,S);var i=s.reduce(function(e,t){return e+(t.y>r/2?1:-1)},0);a.setState({q:s,active:i>0?"lower":"upper"})}}).begin().showPredictionPoints(!0)},a.updateWindowDimensions=function(){return a.setState({width:window.innerWidth,height:window.innerHeight})},a.pauseTracking=function(){a.setState({browsing:!1,paused:!0}),C.pause().showPredictionPoints(!1).showVideo(!1).showFaceOverlay(!1).showFaceFeedbackBox(!1)},a.stopTracking=function(){a.setState({browsing:!1,tracking:!1}),C.clearGazeListener().end()},a.resumeTracking=function(){a.setState({browsing:!0,paused:!1}),C.resume().showPredictionPoints(!0).showVideo(!0).showFaceOverlay(!0).showFaceFeedbackBox(!0)},a._setFrameRef=function(e){a.FrameRef=e},a.hideTracking=function(){a.setState({caliDisplay:"none",browsing:!0,frameDisplay:"block"})},a.closeTracking=function(){a.setState({caliDisplay:"none",frameDisplay:"block"})},a.showCalibration=function(){a.setState({caliDisplay:"flex",frameDisplay:"none"})},a._renderReCalibrateButton=function(){var e=a.state,t=e.browsing,r=e.paused;return m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",onClick:r?a.resumeTracking:t?a.pauseTracking:a.showCalibration,id:"recalibrateButton"},r?"Resume":t?"Pause":"Re-Calibrate")};var r=e.location.search;if(r){var n="?browseURL=".length;"http"!==(r=r.substring(n)).substring(0,4)&&(r="https://"+r)}return a.state={q:[],active:null,width:0,height:0,user:null,token:"",url:r||"https://www.google.com/webhp?igu=1",caliDisplay:r?"none":"flex",frameDisplay:r?"block":"none",tracking:!1,browsing:!1,paused:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&this.setState({user:JSON.parse(e),token:t})}},{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions);var e=setInterval(this.browseScroll,300);this.setState({intervalId:e})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions),C.clearGazeListener(),clearInterval(this.state.intervalId)}},{key:"render",value:function(){var e=this.state,t=e.active,a=e.user,r=e.url,n=e.caliDisplay,o=e.frameDisplay,s=e.tracking;return m.a.createElement(k,{style:{height:"fit-content"}},m.a.createElement("div",{className:"App",style:{display:n}},m.a.createElement("div",{className:"upper",style:{backgroundColor:"upper"===t?"green":"transparent"}}),m.a.createElement("div",{className:"lower",style:{backgroundColor:"lower"===t?"green":"transparent"}}),m.a.createElement("img",{src:y.a,alt:"logo"}),m.a.createElement("h1",null,"Please Calibrate Webcam"),m.a.createElement("p",null,"Click four corners of the screen 5 - 10 times while looking at the red dot."),m.a.createElement("div",{className:"buttonContainer"},m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",onClick:this.startTraking,disabled:s},"Start"),m.a.createElement(h.a,{variant:"outlined",size:"medium",onClick:this.hideTracking,disabled:!s},"Done"),m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"secondary",onClick:this.closeTracking,disabled:s},"Close"))),a?m.a.createElement(p,{displayText:a.name,buttonText:"Bookmarks",buttonLink:"/bookmarks"},this._renderReCalibrateButton()):m.a.createElement(g,null,this._renderReCalibrateButton()),m.a.createElement("div",{className:"contentContainer"},m.a.createElement("iframe",{src:r,title:"iframe",className:"iframe",scrolling:"no",style:{display:o}})))}}]),t}(u.Component),F=(a(5677),"".concat("https://itracker-test.herokuapp.com","/api")),P="".concat(F,"/users"),N="".concat(F,"/bookmarks"),O="".concat(P,"/login"),_="".concat(P,"/register"),L=("".concat(P),"".concat(N)),j=("".concat(N),"".concat(N)),I="".concat(N),D="".concat(N),A=a(5769),z=a(5767),R=a(12),B=a(5768),V=a(5770),W=a(45),M=a.n(W),U=A.a.TextArea,H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={user:null,bookmarkList:[],deleteVisible:!1,editVisible:!1,addVisible:!1},a._updateFolderList=function(){var e=a.state,t=e.token,r=e.user;M.a.get(L,{params:{userID:r._id,token:t}}).then(function(e){console.log(e.data),a.setState({bookmarkList:e.data.data})}).catch(function(e){console.log(e.response)})},a._renderUrls=function(e){var t=z.a.Item;return m.a.createElement(z.a,{bordered:!0,dataSource:e,renderItem:function(e){return m.a.createElement(t,null,m.a.createElement(r.b,{to:"/?browseURL=".concat(e)},e))}})},a._renderFolderButtons=function(e){return m.a.createElement("div",{className:"folderButtons"},m.a.createElement(R.a,{type:"edit",style:{marginRight:10},onClick:function(t){t.stopPropagation(),a.setState({currentFolderID:e._id,currentFolderName:e.name,currentFolderUrls:e.urlList.join("\n")},function(){a.showEditModal()})}}),m.a.createElement(R.a,{type:"delete",onClick:function(t){t.stopPropagation(),a.setState({currentFolderID:e._id},function(){a.showDeleteModal()})}}))},a._renderAddButton=function(){return m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",onClick:a.showAddModal,id:"addButton"},"Add")},a.showAddModal=function(){a.setState({addVisible:!0})},a.handleAdd=function(e){a._addFolder(),a.setState({addVisible:!1})},a.handleCancelAdd=function(e){a.setState({addVisible:!1})},a._addFolder=function(){var e=a.state,t=e.currentFolderName,r=e.currentFolderUrls,n=e.user,o=e.token;M.a.post(j,{name:t,urlList:r.split("\n"),assignedUser:n._id,token:o}).then(function(e){console.log(e.data),a._updateFolderList()}).catch(function(e){console.log(e.response)})},a.showDeleteModal=function(){a.setState({deleteVisible:!0})},a.handleDelete=function(e){a._deleteFolder(a.state.currentFolderID),a.setState({deleteVisible:!1})},a.handleCancelDelete=function(e){a.setState({deleteVisible:!1})},a.showEditModal=function(){a.setState({editVisible:!0})},a.handleEdit=function(e){a._editFolder(),a.setState({editVisible:!1})},a.handleCancelEdit=function(e){a.setState({editVisible:!1})},a._editFolder=function(){var e=a.state,t=e.currentFolderID,r=e.currentFolderName,n=e.currentFolderUrls,o=e.token;M.a.put("".concat(I,"/").concat(t),{name:r,urlList:n.split("\n"),token:o}).then(function(e){console.log(e.data),a._updateFolderList()}).catch(function(e){console.log(e.response)})},a.folderNameChange=function(e){a.setState({currentFolderName:e.target.value})},a.folderListChange=function(e){a.setState({currentFolderUrls:e.target.value})},a._deleteFolder=function(e){var t=a.state.token;M.a.delete("".concat(D,"/").concat(e),{params:{token:t}}).then(function(e){console.log(e.data),a._updateFolderList()}).catch(function(e){console.log(e.response)})},a._renderCollapse=function(){var e=a.state.bookmarkList,t=B.a.Panel;return m.a.createElement(B.a,{bordered:!1,className:"folderList"},e.map(function(e,r){return m.a.createElement(t,{header:e.name,key:r.toString(),extra:a._renderFolderButtons(e),className:"folderPanel"},a._renderUrls(e.urlList))}))},a._renderLogoutButton=function(){return m.a.createElement(r.b,{to:"/",className:"logoutButton"},m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",onClick:function(){return window.localStorage.clear()},id:"logoutButton"},"Logout"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("user"),a=localStorage.getItem("token");t&&a&&(console.log(t,a),t=JSON.parse(t),this.setState({user:t,token:a},function(){return e._updateFolderList()}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.deleteVisible,r=e.editVisible,o=e.addVisible,s=e.currentFolderName,i=e.currentFolderUrls;return t?m.a.createElement(k,{style:{height:"100vh"}},m.a.createElement(p,{displayText:t.name,buttonText:"Return",buttonLink:"/"}),m.a.createElement("div",{className:"contentContainer"},m.a.createElement("img",{src:y.a,alt:"logo"}),m.a.createElement("h1",{className:"bookmarkTitle"},"Bookmarks"),m.a.createElement("div",{className:"foldersContainer"},this._renderAddButton(),this._renderCollapse()),this._renderLogoutButton()),m.a.createElement(V.a,{title:"Delete Folder",visible:a,onOk:this.handleDelete,onCancel:this.handleCancelDelete},m.a.createElement("p",null,"Are you sure?")),m.a.createElement(V.a,{title:"Edit Folder",visible:r,onOk:this.handleEdit,onCancel:this.handleCancelEdit},m.a.createElement("h3",null,"Folder Name"),m.a.createElement(A.a,{placeholder:"My favourite",onChange:this.folderNameChange,value:s||"",className:"inputLine"}),m.a.createElement("h3",null,"URLs (split in lines)"),m.a.createElement(U,{placeholder:"https://google.com/?igu=1",onChange:this.folderListChange,value:i||"",autosize:{minRows:2}})),m.a.createElement(V.a,{title:"Add Folder",visible:o,onOk:this.handleAdd,onCancel:this.handleCancelAdd},m.a.createElement("h3",null,"Folder Name"),m.a.createElement(A.a,{placeholder:"My favourite",onChange:this.folderNameChange,value:s||"",className:"inputLine"}),m.a.createElement("h3",null,"URLs (split in lines)"),m.a.createElement(U,{placeholder:"https://google.com/?igu=1",onChange:this.folderListChange,value:i||"",autosize:{minRows:2}}))):m.a.createElement(n.a,{to:"/login"})}}]),t}(u.Component),Z=a(77),J=a.n(Z),$=a(112),q=a(89),G=a(76),K=(a(5763),a(57)),Q="^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*$",X=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",email_errorText:"",password:"",showPassword:!1,error:!1,loggedIn:!1},a.handleChange=function(e){return function(t){var r,n=t.target.value;switch(a.setState((r={},Object(q.a)(r,e,n),Object(q.a)(r,"error",!1),r)),e){case"email":n.match(Q)?a.setState({email_errorText:""}):a.setState({email_errorText:"Invalid Email Format"})}}},a.handleClickShowPassword=function(){a.setState(function(e){return{showPassword:!e.showPassword}})},a.handleLogin=Object($.a)(J.a.mark(function e(){var t;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.email_errorText){e.next=2;break}return e.abrupt("return");case 2:return t=Object(G.a)(a),e.next=5,new Promise(function(e,r){M.a.post(O,{email:t.state.email,password:t.state.password}).then(function(e){200===e.status?(localStorage.setItem("user",JSON.stringify(e.data.data.user)),localStorage.setItem("token",e.data.data.token),a.setState({loggedIn:!0})):a.setState({error:!0})}).catch(function(e){a.setState({error:!0})})});case 5:case"end":return e.stop()}},e)})),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.state.loggedIn?m.a.createElement(n.a,{to:"/"}):m.a.createElement(k,{style:{height:"100vh"}},m.a.createElement(b,null),m.a.createElement("img",{src:y.a,alt:"logo"}),m.a.createElement("div",{id:"login-form"},m.a.createElement("label",{className:this.state.error?"reminder visible":"reminder invisible"},"Email / Password Incorrect"),m.a.createElement(h.d,{id:"input-email",label:"Email",type:"email",error:this.state.error,className:e.textField,value:this.state.email,onChange:this.handleChange("email"),helperText:this.state.email_errorText,margin:"normal",InputProps:{className:e.input},InputLabelProps:{className:e.cssLabels},FormHelperTextProps:{className:e.helperText}}),m.a.createElement(h.d,{id:"input-password",label:"Password",error:this.state.error,type:this.state.showPassword?"text":"password",className:e.textField,value:this.state.password,onChange:this.handleChange("password"),margin:"normal",InputProps:{className:e.input,endAdornment:m.a.createElement(h.c,{position:"end"},m.a.createElement(h.b,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?m.a.createElement(K.a,null):m.a.createElement(K.b,null)))},InputLabelProps:{className:e.cssLabels}}),m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",onClick:this.handleLogin},"Login")))}}]),t}(u.Component),Y=Object(w.withStyles)(function(e){return{input:{color:"#DDEFF3"},textField:{width:"25%",marginLeft:"auto",marginRight:"auto",paddingBottom:0,marginTop:0,fontWeight:100},cssLabels:{color:"#DDEFF3"},helperText:{color:"#efe8b3",fontWeight:"bold"}}})(X),ee=a(5),te=a.n(ee),ae=(a(5764),"^[A-Za-z0-9]{2,15}$"),re="^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*$",ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",username:"",password:"",confmPassword:"",email_errorText:"",username_errorText:"",password_errorText:"",confmPassword_errorText:"",showPassword:!1,error:!1,loggedIn:!1},a.handleChange=function(e){return function(t){a.setState(Object(q.a)({},e,t.target.value)),a.setState({error:!1});var r=t.target.value;switch(e){case"email":r.match(re)?a.setState({email_errorText:""}):a.setState({email_errorText:"Invalid Email Format."});break;case"username":r.match(ae)?a.setState({username_errorText:""}):a.setState({username_errorText:"Length 2-15 & Only Alphanumeric Characters."});break;case"password":r.length>=6?a.setState({password_errorText:""}):a.setState({password_errorText:"Password at least 6 Characters."});break;case"confmPassword":a.setState({confmPassword_errorText:""})}}},a.handleClickShowPassword=function(){a.setState(function(e){return{showPassword:!e.showPassword}})},a.handleRegister=Object($.a)(J.a.mark(function e(){var t;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.password===a.state.confmPassword){e.next=4;break}a.setState({confmPassword_errorText:"Comfirm Password and Password does not match.",error:!0}),e.next=12;break;case 4:if(!(a.state.email_errorText||a.state.username_errorText||a.state.password_errorText)){e.next=8;break}a.setState({error:!0}),e.next=12;break;case 8:return a.setState({error:!1}),t=Object(G.a)(a),e.next=12,new Promise(function(e,r){M.a.post(_,{name:t.state.username,email:t.state.email,password:t.state.password}).then(function(e){201===e.status?(localStorage.setItem("user",JSON.stringify(e.data.data.user)),localStorage.setItem("token",e.data.data.token),a.setState({loggedIn:!0})):a.setState({error:!0})}).catch(function(e){500===e.status?a.setState({email_errorText:"Registered Email Address",error:!0}):a.setState({error:!0})})});case 12:case"end":return e.stop()}},e)})),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(this.state.loggedIn)return m.a.createElement(n.a,{to:"/"});var e=this.props.classes;return m.a.createElement(k,{style:{height:"100vh"}},m.a.createElement(b,{register:!0}),m.a.createElement("img",{src:y.a,alt:"logo"}),m.a.createElement("div",{id:"login-form"},m.a.createElement(h.d,{id:"input-username",label:"Username",type:"text",error:this.state.error,helperText:this.state.username_errorText,className:e.textField,value:this.state.username,onChange:this.handleChange("username"),margin:"normal",InputProps:{className:e.input},InputLabelProps:{className:e.cssLabels},FormHelperTextProps:{className:e.helperText}}),m.a.createElement(h.d,{id:"input-email",label:"Email",type:"email",error:this.state.error,helperText:this.state.email_errorText,className:e.textField,value:this.state.email,onChange:this.handleChange("email"),margin:"normal",InputProps:{className:e.input},InputLabelProps:{className:e.cssLabels},FormHelperTextProps:{className:e.helperText}}),m.a.createElement(h.d,{id:"input-password",label:"Password",error:this.state.error,helperText:this.state.password_errorText,type:this.state.showPassword?"text":"password",className:e.textField,value:this.state.password,onChange:this.handleChange("password"),margin:"normal",InputProps:{className:e.input,endAdornment:m.a.createElement(h.c,{position:"end"},m.a.createElement(h.b,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?m.a.createElement(K.a,null):m.a.createElement(K.b,null)))},InputLabelProps:{className:e.cssLabels},FormHelperTextProps:{className:e.helperText}}),m.a.createElement(h.d,{id:"input-confm-password",label:"Confirm Password",error:this.state.error,helperText:this.state.confmPassword_errorText,type:this.state.showPassword?"text":"password",className:e.textField,value:this.state.confmPassword,onChange:this.handleChange("confmPassword"),margin:"normal",InputProps:{className:e.input,endAdornment:m.a.createElement(h.c,{position:"end"},m.a.createElement(h.b,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?m.a.createElement(K.a,null):m.a.createElement(K.b,null)))},InputLabelProps:{className:e.cssLabels},FormHelperTextProps:{className:e.helperText}}),m.a.createElement(h.a,{variant:"outlined",size:"medium",color:"primary",onClick:this.handleRegister},"Register")))}}]),t}(u.Component),oe=Object(w.withStyles)(function(e){return{input:{color:"#DDEFF3"},textField:{width:"25%",marginLeft:"auto",marginRight:"auto",paddingBottom:0,marginTop:0,fontWeight:100},cssLabels:{color:"#DDEFF3"},helperText:{color:"#E8AC66",fontWeight:"bold"}}})(ne);te.a.render(m.a.createElement(r.a,null,m.a.createElement(n.d,null,m.a.createElement(n.b,{exact:!0,path:"/",component:T}),m.a.createElement(n.b,{path:"/login",component:Y}),m.a.createElement(n.b,{path:"/register",component:oe}),m.a.createElement(n.b,{path:"/bookmarks",component:H}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5539,1,2]]]);
//# sourceMappingURL=main.cbaf8b51.chunk.js.map